{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html data-bs-theme="light" lang="en-US" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Dashboard</title>
    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <link rel="icon" type="image/svg+xml" href="{% static 'assets/img/logos/gs-favicon.svg' %}">
    <link rel="alternate icon" href="{% static 'assets/img/logos/gs-favicon.ico">
    <link rel="mask-icon" href="{% static 'assets/img/logos/gs-favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'assets/img/logos/gs-favicon-180.png' %}">
    <meta content="#ffffff" name="theme-color">
    <meta name="theme-color" content="#ffffff">
    <script src="{% static 'assets/js/config.js' %}"></script>
    <!-- ===============================================-->
    <!--    Stylesheets-->
    <!-- ===============================================-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700%7cPoppins:300,400,500,600,700,800,900&amp;display=swap" rel="stylesheet">
    <link href="{% static 'vendors/simplebar/simplebar.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendors/datatable/datatables.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/theme-rtl.css' %}" rel="stylesheet" id="style-rtl">
    <link href="{% static 'assets/css/theme.css' %}" rel="stylesheet" id="style-default">
    <link href="{% static 'vendors/toastr/toastr.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/user-rtl.css' %}" rel="stylesheet" id="user-style-rtl">
    <link href="{% static 'assets/css/user.css' %}" rel="stylesheet" id="user-style-default">
    <script>
        var isRTL = JSON.parse(localStorage.getItem('isRTL'));
        if (isRTL) {
            var linkDefault = document.getElementById('style-default');
            var userLinkDefault = document.getElementById('user-style-default');
            linkDefault.setAttribute('disabled', true);
            userLinkDefault.setAttribute('disabled', true);
            document.querySelector('html').setAttribute('dir', 'rtl');
        } else {
            var linkRTL = document.getElementById('style-rtl');
            var userLinkRTL = document.getElementById('user-style-rtl');
            linkRTL.setAttribute('disabled', true);
            userLinkRTL.setAttribute('disabled', true);
        }
    </script>
</head>

<body>

<!-- ===============================================-->
<!--    Main Content-->
<!-- ===============================================-->
<main class="main" id="top">
    <div class="container" data-layout="container">
        <script>
            var isFluid = JSON.parse(localStorage.getItem('isFluid'));
            if (isFluid) {
                var container = document.querySelector('[data-layout]');
                container.classList.remove('container');
                container.classList.add('container-fluid');
            }
        </script>
        <nav class="navbar navbar-light navbar-vertical navbar-expand-xl">
            <script>
                var navbarStyle = localStorage.getItem("navbarStyle");
                if (navbarStyle && navbarStyle !== 'transparent') {
                    document.querySelector('.navbar-vertical').classList.add(`navbar-${navbarStyle}`);
                }
            </script>
            <div class="d-flex align-items-center">
                <div class="toggle-icon-wrapper" style="margin-right: 0.6rem;">
                    <button class="btn navbar-toggler-humburger-icon navbar-vertical-toggle" data-bs-toggle="tooltip" data-bs-placement="left" title="Toggle Navigation"><span class="navbar-toggle-icon"><span class="toggle-line"></span></span></button>
                </div>
                <div class="navbar-brand">
                    <div class="d-flex align-items-center py-3"><img class="me-2" src="{% static 'assets/img/logos/logo.png' %}" alt="" width="150"/>
                        <span class="font-sans-serif fs-0 fw-medium"></span></div>
                </div>
            </div>
            <div class="collapse navbar-collapse mt-2" id="navbarVerticalCollapse">
                <div class="navbar-vertical-content scrollbar position-relative">
                    <ul class="navbar-nav flex-column mb-3 " id="navbarVerticalNav">
                        <li class="row navbar-vertical-label-wrapper mt-0 mb-2">
                            <div class="col-auto navbar-vertical-label text-primary fs-0">Menu</div>
                            <div class="col ps-0">
                                <hr class="mb-0 navbar-vertical-divider">
                            </div>
                        </li>
                        <li class="nav-link dropdown-indicator collapsed" href="#investments" role="button" data-bs-toggle="collapse">
                            <div class="text-700 d-flex align-items-center"><span class="nav-link-icon"><span class="fa-solid fa-circle-dollar-to-slot"></span></span><span class="ps-1">Investments</span></div>
                        </li>
                        <ul class="nav collapse" id="investments">
                            <li class="nav-item" id="investmentsMenu">
                                <a class="nav-link" role="button" data-bs-toggle="collapse">
                                    <div class="d-flex align-items-center"><span class="nav-link-icon"><span class="fas fa-list-ul"></span></span><span class=" ps-1">View Investments</span></div>
                                </a>
                            </li>
                        </ul>
                        <li class="nav-item" style="margin-bottom: 1px;" id="investmentHistoryMenu">
                            <a class="nav-link" role="button" data-bs-toggle="collapse">
                                <div class="d-flex align-items-center"><span class="nav-link-icon"><span class="fa-solid fa-history"></span></span><span class=" ps-1">Investment History</span></div>
                            </a>
                        </li>
                        <li class="row navbar-vertical-label-wrapper mt-3 mb-2">
                            <div class="col-auto navbar-vertical-label text-primary fs-0">Preferences</div>
                            <div class="col ps-0">
                                <hr class="mb-0 navbar-vertical-divider">
                            </div>
                        </li>
                        <li class="nav-item" style="margin-bottom: 0.5px;">
                            <div class="nav-link" role="button" data-bs-toggle="collapse">
                                <div class="d-flex align-items-center"><span class="nav-link-icon"><span class="fa-solid fa-palette"></span></span><span class="nav-link-text ps-1">Color Scheme</span></div>
                            </div>
                            <div class="w-100">
                                <div class="form-check form-check-inline ms-1">
                                    <input class="form-check-input nav-link-text" id="themeSwitcherLight" name="theme-color" type="radio" value="light" data-theme-control="theme" checked="true"/>
                                    <label class="d-inline-block nav-link-text" for="themeSwitcherLight">Light</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" id="themeSwitcherDark" name="theme-color" type="radio" value="dark" data-theme-control="theme"/>
                                    <label class="d-inline-block" for="themeSwitcherDark"> Dark</label>
                                </div>
                            </div>
                            <hr class="w-75 mx-auto"/>
                            <div class="mt-2 nav-link" role="button" data-bs-toggle="collapse">
                                <div class="d-flex align-items-center"><span class="nav-link-icon"><span class="fa-solid fa-right-left"></span></span><span class="nav-link-text ps-1">Language Direction</span></div>
                            </div>
                            <div class="w-100">
                                <div class="d-flex align-items-center form-check form-switch p-0">
                                    <div class="me-2 nav-link-text">RTL Mode</div>
                                    <div><input class="d-inline-block form-check-input ms-0" id="mode-rtl" type="checkbox" data-theme-control="isRTL"></div>
                                </div>
                            </div>
                            <hr class="w-75 mx-auto"/>
                            <div class="mt-3 nav-link" role="button" data-bs-toggle="collapse">
                                <div class="d-flex align-items-center"><span class="nav-link-icon"><span class="fa-solid fa-arrows-left-right-to-line"></span></span><span class="nav-link-text ps-1">Stretched Layout</span></div>
                            </div>
                            <div class="w-100">
                                <div class="d-flex align-items-center form-check form-switch p-0">
                                    <div class="me-2 nav-link-text">Full View Mode</div>
                                    <div><input class="d-inline-block form-check-input ms-0" id="mode-fluid" type="checkbox" data-theme-control="isFluid"></div>
                                </div>
                            </div>
                            <hr class="w-75 mx-auto"/>
                        </li>
                    </ul>
                <form method="POST" action="{% url 'logout' %}">
                {% csrf_token %}
                <div class="w-100 mb-2">
                    <button class="logout btn btn-sm w-100 btn-outline-danger m-0 nav-link-text" type="submit">
                        <span class="fa-solid fa-sign-out-alt fa-flip-horizontal ps-2"></span>LOGOUT
                    </button>
                </div>
            </form>

                </div>
            </div>
        </nav>
        <div class="content">
            <nav class="navbar navbar-light navbar-glass navbar-top navbar-expand">
                <button class="btn navbar-toggler-humburger-icon navbar-toggler me-1 me-sm-3 collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarVerticalCollapse" aria-controls="navbarVerticalCollapse" aria-expanded="false" aria-label="Toggle Navigation"><span class="navbar-toggle-icon"><span class="toggle-line"></span></span></button>
                <div class="navbar-brand me-1 me-sm-3">
                    <div class="d-flex align-items-center"><img class="me-1" src="{% static 'assets/img/logos/logo.png' %}" alt="" width="150"/><span class="font-sans-serif fs--1 fw-medium"></span></div>
                </div>
                <div class="navbar-nav align-items-center d-none d-md-block d-lg-block">
                    <div class="gtranslate_wrapper position-absolute" style="top: 23px"></div>
                    <div class="cryptohopper-web-widget position-absolute d-none d-xl-block" style="width: 350px; top: 15px; left: 190px" data-id="2"></div>
                </div>
                <ul class="navbar-nav navbar-nav-icons ms-auto flex-row align-items-center">
                    <li class="d-none d-md-block d-lg-block fs-lg--1 fw-medium text-primary shadow border border-1 rounded-5 px-3 py-1"><span><i class="far fa-smile"></i>&nbsp;Hello, </span>{{ request.user.username }}</li>
                    <li class="nav-item px-2 dropdown">
                        <div class="theme-control-toggle fa-icon-wait">
                            <input class="form-check-input ms-0 theme-control-toggle-input" id="themeControlToggle" type="checkbox" data-theme-control="theme" value="dark"/>
                            <label class="mb-0 theme-control-toggle-label theme-control-toggle-light" for="themeControlToggle" data-bs-toggle="tooltip" data-bs-placement="left" title="Switch to light theme"><span class="fas fa-sun fs-0"></span></label>
                            <label class="mb-0 theme-control-toggle-label theme-control-toggle-dark" for="themeControlToggle" data-bs-toggle="tooltip" data-bs-placement="left" title="Switch to dark theme"><span class="fas fa-moon fs-0"></span></label>
                        </div>
                    </li>
                    <li class="nav-item dropdown" id="notificationBox">
                        <a class="nav-link notification-indicator notification-indicator-primary px-0 fa-icon-wait" id="navbarDropdownNotification" role="button" data-bs-toggle="dropdown" data-hide-on-body-scroll="data-hide-on-body-scroll"><span class="fas fa-bell" data-fa-transform="shrink-4" style="font-size: 33px;"></span><span class="notification-indicator-number d-none" id="n-count"></span></a>
                        <div class="dropdown-menu dropdown-caret dropdown-caret dropdown-menu-end dropdown-menu-card dropdown-menu-notification dropdown-caret-bg">
                            <div class="card card-notification shadow-none" id="notification-panel">
                                <div class="card-header">
                                    <div class="row justify-content-between align-items-center">
                                        <div class="col-auto">
                                            <h6 class="card-header-title mb-0 text-primary fw-medium">Notifications</h6>
                                        </div>
                                        <div class="col-auto ps-0 ps-sm-3"><a class="card-link fw-normal" id="markAllRead" href="#">Mark all as read</a></div>
                                    </div>
                                </div>
                                <div class="scrollbar-overlay" style="max-height: 19rem">
                                    <div class="list-group list-group-flush fw-normal fs--1 list notification-body">

                                    </div>
                                </div>
                                <div class="card-footer text-center bg-400"></div>
                            </div>
                        </div>

                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link pe-0 ps-2" id="navbarDropdownUser" role="button" data-bs-toggle="modal" data-bs-target="#profileSettingsModal" aria-haspopup="true" aria-expanded="false">
                            <div class="avatar avatar-xl status-online">
                                <img id="dashboardProfilePIC" class="rounded-circle" src="{{ request.user.get_profile_picture_url }}" alt="{{ request.user.fullname|default:request.user.username }}" title="{{ request.user.fullname|default:request.user.username }}">
                            </div>
                        </a>
                        <div class="dropdown-menu dropdown-caret dropdown-menu-end py-0">
                            <div class="bg-white dark__bg-1000 rounded-2 py-2">
                                <span class="dropdown-item" id="profileSettings" style="cursor: pointer;" data-bs-toggle="modal" data-bs-target="#profileSettingsModal"><i class="fas fa-id-card"></i>&nbsp;&nbsp;Profile &amp; account</span>
                                <div class="dropdown-divider"></div>
                                <span class="dropdown-item isDisabled d-none" style="cursor: pointer;"><i class="fas fa-cogs"></i>&nbsp;&nbsp;Settings</span>
                                <div class="dropdown-divider d-none"></div>
                                <span class="logout dropdown-item text-danger" style="cursor: pointer;"><i class="fas fa-sign-out-alt fa-flip-horizontal"></i>&nbsp;&nbsp;Logout</span>
                            </div>
                        </div>
                    </li>
                </ul>
            </nav>
            <div class="d-flex mb-3 align-items-center mt-2">
                <div class="flex-shrink-0 pe-1"><h5 class="mb-0 text-primary fs-0">Personal Information</h5></div>
                <div class="bg-gradient bg-300 w-100" style="height: 2px;"></div>
            </div>
            <div class="row g-3 mb-3" id="personalInfo">
                <div class="col">
                    <div class="card h-md-100 overflow-hidden">
                        <div class="bg-holder" style="background-image:url({% static 'assets/img/icons/spot-illustrations/corner-44.png' %}); background-position: left"></div>
                        <div class="card-body z-1">
                            <div class="d-flex flex-column flex-lg-row align-items-center">
                                <div class="flex-shrink-0 flex-grow-1 flex-lg-grow-0  mb-3 me-2 mb-lg-0">
                                    <div class="avatar avatar-4xl bg-200 rounded-circle ms-3">
                                        <img class="border border-1 border-300 rounded-circle" id="personalInfoProfilePic" src="{{ request.user.get_profile_picture_url }}" alt="..."/>
                                    </div>
                                </div>
                                <div class="d-flex flex-wrap flex-md-nowrap flex-md-row align-items-center gap-1 w-100">
                                    <div class="row gap-1 overflow-x-hidden">
                                        <div class="d-flex align-items-baseline flex-grow-1">
                                            <div class="flex-shrink-0 text-end badge bg-info border border-info-subtle" style="width: 70px;">NAME</div>
                                            <div id="piName" class="text-start ms-1 badge badge-subtle-info border border-info-subtle w-100 overflow-hidden white-space-nowrap" style="text-overflow: ellipsis;"">{{ request.user.fullname }}</div>
                                        </div>
                                        <div class="d-flex align-items-baseline flex-grow-1">
                                            <div class="flex-shrink-0 text-end badge bg-info border border-info-subtle" style="width: 70px">E-MAIL</div>
                                            <div id="piEmail" class="text-start ms-1 badge badge-subtle-info border border-info-subtle w-100 overflow-hidden white-space-nowrap" style="text-overflow: ellipsis;"">{{ request.user.email }}</div>
                                        </div>
                                    </div>
                                    <div class="row gap-1 overflow-x-hidden">
                                        <div class="d-flex align-items-baseline flex-grow-1">
                                            <div class="flex-shrink-0 text-end badge bg-info border border-info-subtle" style="width: 70px;">MOBILE</div>
                                            <div id="piPhone" class="text-start ms-1 badge badge-subtle-info border border-info-subtle w-100 overflow-hidden white-space-nowrap" style="text-overflow: ellipsis;"">{{ request.user.phone }}</div>
                                        </div>
                                        <div class="d-flex align-items-baseline flex-grow-1">
                                            <div class="flex-shrink-0 text-end badge bg-info border border-info-subtle" style="width: 70px">ADDRESS</div>
                                            <div id="piAddress" class="text-start ms-1 badge badge-subtle-info border border-info-subtle w-100 overflow-hidden white-space-nowrap" style="text-overflow: ellipsis;"> {{ request.user.address|default:"N/A"}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col flex-grow-0 flex-shrink-1 ">
                                    <div class="bg-holder bg-card opacity-25" style="background-image:url({% static 'assets/img/illustrations/corner-6.png' %}); background-position: right; background-repeat: no-repeat"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-flex mb-3 align-items-center mt-2">
                <div class="flex-shrink-0 pe-1"><h5 class="mb-0 text-primary fs-0">Investment Overview</h5></div>
                <div class="bg-gradient bg-300 w-100" style="height: 2px;"></div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-6 col-xxl-3">
                    <div class="card h-md-100 overflow-hidden" id="availableAccountBalance">
                        <div class="bg-holder bg-card" style="background-image:url({% static 'assets/img/icons/spot-illustrations/corner-4.png' %});"></div>
                        <div class="card-header pb-0 z-1">
                            <h6 class="mb-0 mt-2 d-flex align-items-center">Active Initial Investment<span class="ms-1 text-400" data-bs-toggle="tooltip" data-bs-placement="top" title="This is the original amount of money you put into the investment."><span class="far fa-question-circle" data-fa-transform="shrink-1"></span></span></h6>
                        </div>
                        <div class="card-body d-flex flex-column justify-content-end z-1">
                            <div class="row">
                               <div class="col">
                        <p class="font-sans-serif lh-1 mb-1 fs-4 text-success" id="accountBalance" data-account-balance-visible="false" data-account-balance="${{ balance.Active_Initial_Investment|intcomma|default:'0.0000' }}">******</p>
                        <span id="accountBalanceEye" class="cursor-pointer" data-bs-toggle="tooltip" data-bs-placement="right" title="hide"><span class="accountBalanceEye fa-solid fa-eye"></span></span>
                    </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-xxl-3">
                    <div class="card h-md-100 overflow-hidden" id="investmentDetails">
                        <div class="bg-holder bg-card" style="background-image:url({% static 'assets/img/icons/spot-illustrations/corner-3.png' %});"></div>
                        <div class="card-header pb-0 z-1">
                            <h6 class="mb-0 mt-2 d-flex align-items-center">Investment Details<span class="ms-1 text-400" data-bs-toggle="tooltip" data-bs-placement="top" title="Your investment details"><span class="far fa-question-circle" data-fa-transform="shrink-1"></span></span></h6>
                        </div>
                        <div class="card-body flex-column justify-content-end z-1">
                            <div class="row align-items-center">
                                <div class="col fs--1">
                                    <div class="mb-1">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <span class="dot bg-primary"></span>
                                                <span class="fw-semi-bold">Start Date<span class="ms-1 text-400" data-bs-toggle="tooltip" data-bs-placement="right" title="Date started"><span class="far fa-question-circle text-info" data-fa-transform="shrink-1"></span></span></span>
                                            </div>
                                            <span class="badge rounded-pill badge-subtle-info fs--3" id="startDate">{{ investment.start_date|date:"Y-m-d"|default:"0000-00-00" }}</span>
                                        </div>
                                    </div>
                                    <div class="mb-1">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <span class="dot bg-primary"></span>
                                                <span class="fw-semi-bold">Status<span class="ms-1 text-400" data-bs-toggle="tooltip" data-bs-placement="right" title="Investment Status"><span class="far fa-question-circle text-info" data-fa-transform="shrink-1"></span></span></span>
                                            </div>
                                            <span class="badge rounded-pill badge-subtle-success fs--3"><i class="fas fa-spinner fa-spin-pulse"></i>&nbsp;<span id="investmentStatus">{{ investment.status|default:"NONE" }}</span></span>
                                        </div>
                                    </div>
                                    <div class="mb-1">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <span class="dot bg-primary"></span>
                                                <span class="fw-semi-bold">Days count<span class="ms-1 text-400" data-bs-toggle="tooltip" data-bs-placement="right" title="Investment Age"><span class="far fa-question-circle text-info" data-fa-transform="shrink-1"></span></span></span>
                                            </div>
                                            <span class="badge rounded-pill badge-subtle-info fs--3" id="daysCount">0</span>
                                        </div>
                                    </div>
                                    <div class="mb-1">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <span class="dot bg-primary"></span>
                                                <span class="fw-semi-bold">ROI<span class="ms-1 text-400" data-bs-toggle="tooltip" data-bs-placement="right" title="Profit"><span class="far fa-question-circle text-info" data-fa-transform="shrink-1"></span></span></span>
                                            </div>
                                            <div class="d-flex">
                                                <span id="roiEye" class="cursor-pointer me-1" data-bs-toggle="tooltip" data-bs-placement="right" title="hide"><span class="roiEye fa-solid fa-eye"></span></span>
                                                <span class="badge rounded-pill badge-subtle-info fs--3" id="roi" data-roi-balance-visible="false" data-roi-balance="${{ balance.Total_Return|intcomma|default:'0.0000' }}">******</span>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col text-end flex-grow-0 flex-shrink-0">
                                    <img class="mt-n3 opacity-50" src="{% static 'assets/img/icons/shield.png' %}" height="60"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-xxl-3">
                    <div class="card h-md-100 overflow-hidden">
                        <div class="bg-holder bg-card" style="background-image:url({% static 'assets/img/icons/spot-illustrations/corner-4.png' %});"></div>
                        <div class="card-header pb-0 z-1">
                            <h6 class="mb-0 mt-2 d-flex align-items-center">Total Return<span class="ms-1 text-400" data-bs-toggle="tooltip" data-bs-placement="top" title="This is the final value of the investment, which is the sum of the initial investment and the profit (ROI)."><span class="far fa-question-circle" data-fa-transform="shrink-1"></span></span></h6>
                        </div>
                        <div class="card-body d-flex flex-column justify-content-end z-1">
                            <div class="row">
                                <div class="col">
                                    <p class="font-sans-serif lh-1 mb-1 fs-4 text-success" id="totalReturn" data-total-return-balance-visible="false" data-total-return-balance="${{ balance.Total_Return|intcomma|default:'0.0000' }}">******</p>
                                    <span id="totalReturnEye" class="cursor-pointer" data-bs-toggle="tooltip" data-bs-placement="right" title="hide"><span class="totalReturnEye fa-solid fa-eye"></span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-xxl-3">
                    <div class="card h-md-100 overflow-hidden">
                        <div class="bg-holder bg-card" style="background:url({% static 'assets/img/icons/spot-illustrations/corner-4.png' %}) right no-repeat, linear-gradient(to bottom, #b4ddb4 0%,#83c783 17%,#52b152 33%); background-size: contain;"></div>
                        <div class="card-header pb-0 z-1">
                            <h6 class="mb-0 mt-2 d-flex align-items-center text-white">Total Available For Withdrawal<span class="ms-1 text-400" data-bs-toggle="tooltip" data-bs-placement="top" title="Available for withdrawal"><span class="far fa-question-circle text-white" data-fa-transform="shrink-1"></span></span></h6>
                        </div>
                        <div class="card-body d-flex flex-column z-1">
                            <div class="row">
                                <div class="d-flex flex-column col">
                                    <div class="d-flex mb-1">
                                        <p class="font-sans-serif lh-1 me-2 fs-4 text-white" id="withdrawalBalance" data-withdrawal-balance-visible="false" data-withdrawal-balance="${{ balance.Total_Available_Withdrawal|intcomma|default:'0.0000' }}">******</p>
                                        <span id="withdrawalBalanceEye" class="cursor-pointer" data-bs-toggle="tooltip" data-bs-placement="right" title="hide"><span class="withdrawalBalanceEye fa-solid fa-eye fs-1 text-white"></span></span>
                                    </div>
                                    <span class="badge rounded-pill badge-subtle-success fs--2 w-fit">Ready for withdrawal</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            
            <div class="row g-0 mb-3" id="investmentHistoryContainer">
               <div class="col-xxl-6 px-xxl-2">
                <div class="card">
                    <div class="card-header bg-light py-2">
                        <h6 class="mb-0">Investment History</h6>
                    </div>
                    <div class="card-body px-0 py-1">
                       <table id="investmentHistoryTableModal" class="table table-sm table-striped table-hover fs--1 w-100">
                    <thead class="bg-200 text-900">
                        <tr class="cursor-pointer">
                            <th class="sort align-middle white-space-nowrap px-2">Date</th>
                            <th class="sort align-middle white-space-nowrap px-2 d-none d-md-table-cell">Description</th>
                            <th class="sort align-middle white-space-nowrap px-2">Amount</th>
                            <th class="sort align-middle white-space-nowrap px-2">Status</th>
                        </tr>
                    </thead>
                    <tbody id="tableInvestmentHistoryBodyModal">
                        {% for history in investment_history %}
                            <tr>
                                <td class="align-middle white-space-nowrap px-2">{{ history.date|date:"Y-m-d H:i" }}</td>
                                <td class="align-middle white-space-nowrap px-2 d-none d-md-table-cell">{{ history.description|default:"N/A" }}</td>
                                <td class="align-middle white-space-nowrap px-2">{{ history.amount|floatformat:2 }}</td>
                                <td class="align-middle white-space-nowrap px-2">
                                    <span class="badge rounded-pill {% if history.status == 'COMPLETED' %}badge-subtle-success{% elif history.status == 'FAILED' %}badge-subtle-danger{% elif history.status == 'CANCELLED' %}badge-subtle-warning{% else %}badge-subtle-info{% endif %}">
                                        {{ history.status }}
                                    </span>
                                </td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="4" class="text-center">No investment history available.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                    </div>
                </div>
            </div>



            </div>
            <footer class="footer">
                <div class="row g-0 justify-content-between fs--1 mt-4 mb-3">
                    <div class="col-12 col-sm-auto text-center">
                        <p class="mb-0 text-600">&copy; Goldman Sachs Mosaic</p>
                    </div>
                    <div class="col-12 col-sm-auto text-center d-none">
                        <p class="mb-0 text-600">v3.17.0</p>
                    </div>
                </div>
            </footer>
        </div>

    </div>

    <!-- ===============================================-->
    <!--    Beginning of modals and toast messages-->
    <!-- ===============================================-->

    <!-- Investment History Modal -->
<div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" id="investmentHistoryModal" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white p-1">
                <div class="fas fa-file-invoice-dollar fs-1 mx-2"></div>
                <div class="flex-grow-1 modalTitle modal-title fs-0 fw-medium me-auto">Investment History</div>
                <!--                            <button class="btn-close me-0" data-bs-dismiss="modal" type="button"></button>-->
            </div>
            <div class="fw-normal fs--1 py-1">
                <table id="investmentHistoryTableModal" class="table table-sm table-striped table-hover fs--1 w-100">
                    <thead class="bg-200 text-900">
                        <tr class="cursor-pointer">
                            <th class="sort align-middle white-space-nowrap px-2">Date</th>
                            <th class="sort align-middle white-space-nowrap px-2 d-none d-md-table-cell">Description</th>
                            <th class="sort align-middle white-space-nowrap px-2">Amount</th>
                            <th class="sort align-middle white-space-nowrap px-2">Status</th>
                        </tr>
                    </thead>
                    <tbody id="tableInvestmentHistoryBodyModal">
                        {% for history in investment_history %}
                            <tr>
                                <td class="align-middle white-space-nowrap px-2">{{ history.date|date:"Y-m-d H:i" }}</td>
                                <td class="align-middle white-space-nowrap px-2 d-none d-md-table-cell">{{ history.description|default:"N/A" }}</td>
                                <td class="align-middle white-space-nowrap px-2">{{ history.amount|floatformat:2 }}</td>
                                <td class="align-middle white-space-nowrap px-2">
                                    <span class="badge rounded-pill {% if history.status == 'COMPLETED' %}badge-subtle-success{% elif history.status == 'FAILED' %}badge-subtle-danger{% elif history.status == 'CANCELLED' %}badge-subtle-warning{% else %}badge-subtle-info{% endif %}">
                                        {{ history.status }}
                                    </span>
                                </td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="4" class="text-center">No investment history available.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="modal-footer bg-200 justify-content-center p-1">
                <button class="btn btn-sm btn-primary py-0" data-bs-dismiss="modal" type="button" id="investmentHistoryButton">GOT IT</button>
            </div>
        </div>
    </div>
</div>
    <div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" id="profileSettingsModal"    role="dialog" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white p-1">
                    <div class="fas fa-address-card fs-1 mx-2"></div>
                    <div class="flex-grow-1 modalTitle modal-title fs-0 fw-medium me-auto">Profile Settings</div>
                </div>
                <div class="d-flex flex-column position-relative align-items-center mt-n1 mb-3 mb-md-4 py-2 py-md-3 bg-gradient bg-primary" id="psHeaderBG">
                    <div class="z-3 avatar avatar-4xl status-online bg-dark rounded-circle" id="profilePICContainer">
                        <img class="border border-3 status-online shadow rounded-circle" id="profilePic" src="{{ request.user.get_profile_picture_url }}" alt="..."/>
                    </div>
                    <div id="uploadContainer" class="z-3 d-flex bg-secondary align-items-center justify-content-center opacity-75 cursor-pointer" style="margin-top: -2.2rem; height: 2rem; width: 2rem; border-radius: 50px;" data-bs-original-title="change or upload your profile picture" data-bs-placement="top" data-bs-toggle="tooltip">
                        <div class="fa fa-camera text-white"></div>
                    </div>
                   <div>
                        <form id="formUpload" enctype="multipart/form-data" method="POST">
                            {% csrf_token %}
                            <input
                            class="d-none"
                            id="fileUploadInput"
                            name="profile_picture"
                            type="file"
                            accept=".jpg, .jpeg, .png, .gif, .bmp"
                            />
                        </form>
                        </div>

                </div>
                <div class="modal-body pt-0 pb-0">
                    <div class="mb-3">
                        <div class="row gx-1 my-2">
                            <div class="col-4">
                                <div class="w-100 text-end badge badge-subtle-primary fs--1 fw-medium text-truncate">User ID<span class="ms-1" data-bs-original-title="Cannot be modified" data-bs-placement="top" data-bs-toggle="tooltip"> <span class="fas fa-circle-info" data-fa-transform="shrink-1"></span></span></div>
                            </div>
                            <div class="col-8">
                                <div class="w-100 text-start badge badge-subtle-secondary fw-medium fs--1 pe-0 text-truncate"><span id="psUserID">{{ request.user.id }}</span>&nbsp;<span class="text-success far fa-circle-check"></span></div>
                            </div>
                        </div>
                        <div class="row gx-1 my-2">
                            <div class="col-4">
                                <div class="w-100 text-end badge badge-subtle-primary fs--1 fw-medium text-truncate">Name<span class="ms-1" data-bs-original-title="Cannot be modified" data-bs-placement="top" data-bs-toggle="tooltip"> <span class="fas fa-circle-info" data-fa-transform="shrink-1"></span></span></div>
                            </div>
                            <div class="col-8">
                                <div class="w-100 text-start badge badge-subtle-secondary fw-medium fs--1 pe-0 text-truncate"><span id="psName">{{ request.user.fullname }}</span>&nbsp;<span class="text-success far fa-circle-check"></span></div>
                            </div>
                        </div>

                        <div class="row gx-1 my-2">
                            <div class="col-4">
                                <div class="w-100 text-end badge badge-subtle-primary fs--1 fw-medium text-truncate">Gender<span class="ms-1" data-bs-original-title="Cannot be modified" data-bs-placement="top" data-bs-toggle="tooltip"> <span class="fas fa-circle-info" data-fa-transform="shrink-1"></span></span></div>
                            </div>
                            <div class="col-8">
                                <div class="w-100 text-start badge badge-subtle-secondary fw-medium fs--1 pe-0 text-truncate"><span id="psGender">{{ request.user.get_gender_display }}</span>&nbsp;<span class="text-success far fa-circle-check"></span></div>
                            </div>
                        </div>
                        <div class="row gx-1 my-2">
                            <div class="col-4">
                                <div class="w-100 text-end badge badge-subtle-primary fs--1 fw-medium text-truncate">Mobile<span class="ms-1" data-bs-original-title="(cannot be modified)" data-bs-placement="top" data-bs-toggle="tooltip"> <span class="fas fa-circle-info" data-fa-transform="shrink-1"></span></span></div>
                            </div>
                            <div class="col-8">
                                <div class="w-100 text-start badge badge-subtle-secondary fw-medium fs--1 pe-0 text-truncate"><span id="psMobile">{{ request.user.phone }}</span>&nbsp;<span class="text-success far fa-circle-check"></span></div>
                            </div>
                        </div>
                        <div class="row gx-1 my-2">
                            <div class="col-4">
                                <div class="w-100 text-end badge badge-subtle-primary fs--1 fw-medium text-truncate">Email<span class="ms-1" data-bs-original-title="(cannot be modified)" data-bs-placement="top" data-bs-toggle="tooltip"> <span class="fas fa-circle-info" data-fa-transform="shrink-1"></span></span></div>
                            </div>
                            <div class="col-8">
                                <div class="w-100 text-start badge badge-subtle-secondary fw-medium fs--1 pe-0 text-truncate"><span id="psMail">{{ request.user.phone }}</span>&nbsp;<span class="text-success far fa-circle-check"></span></div>
                            </div>
                        </div>

                        <div class="mt-4 mt-md-6 position-relative">
                            <div class="rounded-1 bg-primary-subtle border border-primary-subtle">
                                <div class="position-absolute card-title-2 z-1 px-3 badge badge-subtle-primary border border-primary-subtle">NOTE</div>
                                <div class="p-3 pt-4 text-primary-emphasis text-justify text-wrap fs--2">The information contained here is read-only and cannot be modified. If there is a need to make any changes, contact our customer service via the live chat channel or email us and make the request.</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer bg-200 justify-content-center p-1">
                    <button class="btn btn-sm btn-primary py-0" data-bs-dismiss="modal" type="button" id="psOK">GOT IT</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Existing content (e.g., Investment History tables) remains unchanged -->

<!-- Investments Modal -->
<div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" id="investmentsModal" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" style="max-width: 500px">
        <div class="modal-content position-relative">
            <div class="modal-header bg-primary text-white p-1">
                <div class="fas fa-file-invoice-dollar fs-1 mx-2"></div>
                <div class="flex-grow-1 modalTitle modal-title fs-0 fw-medium me-auto">&nbsp;Your Investments</div>
                <!--                            <button class="btn-close me-0" data-bs-dismiss="modal" type="button"></button>-->
            </div>
            <div class="modal-body p-0">
                <div class="fs--1">
                    <div class="card-body px-0 py-0">
                        <div class="table-responsive scrollbar">
                            <table id="investmentsTableModal" class="table table-sm table-striped table-hover fs--1 w-100">
                                <thead class="bg-200 text-900">
                                    <tr>
                                        <th class="sort align-middle white-space-nowrap px-2">Start Date</th>
                                        <th class="sort align-middle white-space-nowrap px-2">End Date</th>
                                        <th class="sort align-middle white-space-nowrap px-2">Amount</th>
                                        <th class="sort align-middle white-space-nowrap text-center px-2">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="tableInvestmentsModalBody">
                                    {% for inv in investments %}
                                        <tr>
                                            <td class="align-middle white-space-nowrap px-2">{{ inv.start_date|date:"Y-m-d" }}</td>
                                            <td class="align-middle white-space-nowrap px-2">{{ inv.end_date|date:"Y-m-d"|default:"N/A" }}</td>
                                            <td class="align-middle white-space-nowrap px-2">{{ inv.amount|floatformat:2 }}</td>
                                            <td class="align-middle white-space-nowrap text-center px-2">
                                                <span class="badge rounded-pill {% if inv.status == 'ACTIVE' %}badge-subtle-success{% elif inv.status == 'COMPLETED' %}badge-subtle-success{% elif inv.status == 'CANCELLED' %}badge-subtle-warning{% else %}badge-subtle-info{% endif %}">
                                                    {{ inv.status }}
                                                </span>
                                            </td>
                                        </tr>
                                    {% empty %}
                                        <tr>
                                            <td colspan="4" class="text-center">No investments available.</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="modal-footer bg-200 justify-content-center p-1">
                            <button class="btn btn-sm btn-primary py-0" data-bs-dismiss="modal" type="button" id="investmentsModalButton">GOT IT</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    <!-- ===============================================-->
    <!--    End of modals-->
    <!-- ===============================================-->
</main>
<!-- ===============================================-->
<!--    End of Main Content-->
<!-- ===============================================-->


<!-- ===============================================-->
<!--    JavaScripts-->
<!-- ===============================================-->
<script src="{% static 'assets/js/jquery.js' %}"></script>
<script src="{% static 'vendors/popper/popper.min.js' %}"></script>
<script src="{% static 'vendors/bootstrap/bootstrap.min.js' %}"></script>
<script src="{% static 'vendors/anchorjs/anchor.min.js' %}"></script>
<script src="{% static 'vendors/is/is.min.js' %}"></script>
<script src="{% static 'vendors/echarts/echarts.min.js' %}"></script>
<script src="{% static 'vendors/fontawesome/all.min.js' %}"></script>
<script src="{% static 'vendors/simplebar/simplebar.min.js' %}"></script>
<script src="{% static 'vendors/lodash/lodash.min.js' %}"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
<script src="{% static 'vendors/list.js/list.min.js' %}"></script>
<script src="{% static 'vendors/toastr/toastr.min.js' %}"></script>
<script src="{% static 'assets/js/theme.js' %}"></script>
<script src="{% static 'vendors/datatable/datatables.min.js' %}"></script>
<script src="{% static 'assets/js/general.js' %}"></script>
<script src="{% static 'assets/js/db.js' %}"></script>
<script src="https://www.cryptohopper.com/widgets/js/script"></script>


<!--Start of Tawk.to Script-->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/688ce678cfc5fc192486f57f/1j1j68ib8';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>
<!--End of Tawk.to Script-->


<script>window.gtranslateSettings = {"default_language": "en", "native_language_names": true, "detect_browser_language": true, "wrapper_selector": ".gtranslate_wrapper", "flag_size": 16, "switcher_horizontal_position": "inline"}</script>
<script src="https://cdn.gtranslate.net/widgets/latest/dwf.js" defer></script>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Ensure Bootstrap modal is initialized and triggered
        const profileSettingsModal = new bootstrap.Modal(document.getElementById('profileSettingsModal'), {
            backdrop: 'static',
            keyboard: false
        });

        // Trigger modal on profile picture click (already handled by data-bs-toggle on #navbarDropdownUser)

        // Trigger modal on "Profile & account" dropdown item click
        document.getElementById('profileSettings').addEventListener('click', function () {
            profileSettingsModal.show();
        });
    });
</script>





<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  document.getElementById('fileUploadInput').addEventListener('change', function () {
    const formData = new FormData(document.getElementById('formUpload'));

    fetch("{% url 'upload_profile_picture' %}", {
      method: "POST",
      body: formData,
      headers: {
        "X-CSRFToken": "{{ csrf_token }}",
      },
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        Swal.fire({
          title: 'Success!',
          text: 'Profile picture updated!',
          icon: 'success',
          confirmButtonText: 'OK',
          timer: 2000,
          timerProgressBar: true,
        }).then(() => {
          location.reload();
        });
      } else {
        Swal.fire({
          title: 'Oops!',
          text: 'Upload failed.',
          icon: 'error',
          confirmButtonText: 'Try Again',
        });
      }
    })
    .catch(error => {
      console.error("Upload error:", error);
      Swal.fire({
        title: 'Error!',
        text: 'Something went wrong while uploading.',
        icon: 'error',
        confirmButtonText: 'OK',
      });
    });
  });
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    fetch("{% url 'investment_days_count' %}")
        .then(response => response.json())
        .then(data => {
            if (data.days_count !== undefined) {
                document.getElementById("daysCount").textContent = data.days_count;
            } else {
                document.getElementById("daysCount").textContent = "0";
            }
        })
        .catch(error => {
            console.error("Error fetching days count:", error);
        });
});
</script>




<!--Start of Tawk.to Script-->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/688ce678cfc5fc192486f57f/1j1j68ib8';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>
<!--End of Tawk.toScript-->



</body>

</html>